# JS 函数的执行时机

## 目录
1. 为什么一段代码会打印 6 个 6
2. 如何让上面代码打印出 0、1、2、3、4、5
3. 除了使用 for let 配合，可以打印出 0、1、2、3、4、5 的其他方法

## 正文

### 1.为什么一段代码会打印 6 个 6

代码如下：

```
let i = 0
for(i = 0; i<6; i++){
  setTimeout(()=>{
    console.log(i)
  },0)
}
```

原因：
* for 循环所在的作用域中，定义了一个变量 i；
* 循环执行时，虽然每次循环都生成了一个新的隐藏的作用域，但是这个新的作用域中的 i 都是循环外的那个 i；
* 循环结束后，6个新的作用域中的 i 都是循环外的 i，这个 i 此时的值是 6;

所以此时会打印出 6 个 6。

### 2. 如何让上面代码打印出 0、1、2、3、4、5

代码如下，即可打印出 0、1、2、3、4、5
```
for(let i = 0; i<6; i++){
  setTimeout(()=>{
    console.log(i)
  },0)
}
```

### 3. 除了使用 for let 配合，可以打印出 0、1、2、3、4、5 的其他方法

代码如下，使用 for var 配合，加上立即执行函数，使得每次循环都生成一个局部作用域，在作用域中把 i 保存下来，即可。

```
for(var i = 0; i<6; i++){
  !function(){
    let j = i;
    setTimeout(()=>{
      console.log(j);
    },0)      
  }()
}
```
